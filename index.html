<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zostaniesz mojÄ… WalentynkÄ…?</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffd6e7;
      --card:#ffffffcc;
      --txt:#2b2b2b;
      --accent:#ff3d6e;
      --accent2:#7c3aed;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% 10%, #ffffff 0%, transparent 55%),
        radial-gradient(900px 600px at 80% 20%, #ffe0f0 0%, transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* Subtelne â€œpÅ‚ywajÄ…ceâ€ bokeh/serduszka */
    .float{
      position:absolute; inset:-20%;
      pointer-events:none;
      filter: blur(0.2px);
      opacity:.45;
      animation: drift 18s linear infinite;
      background:
        radial-gradient(circle at 10% 20%, rgba(255,61,110,.25) 0 8px, transparent 9px),
        radial-gradient(circle at 30% 40%, rgba(124,58,237,.18) 0 10px, transparent 11px),
        radial-gradient(circle at 60% 30%, rgba(255,61,110,.18) 0 12px, transparent 13px),
        radial-gradient(circle at 80% 70%, rgba(124,58,237,.14) 0 9px, transparent 10px),
        radial-gradient(circle at 50% 80%, rgba(255,61,110,.12) 0 14px, transparent 15px);
      background-size: 420px 420px;
    }
    @keyframes drift{
      from{transform:translate3d(-2%, -2%, 0) rotate(0deg)}
      to{transform:translate3d(2%, 2%, 0) rotate(8deg)}
    }

    .wrap{
      width:min(920px, 92vw);
      padding: 22px;
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .wrap{grid-template-columns:1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.55);
      border-radius: 22px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 26px;
      position:relative;
      overflow:hidden;
    }

    .title{
      font-size: clamp(28px, 4vw, 44px);
      margin: 0 0 8px;
      letter-spacing:-.02em;
      line-height:1.05;
    }
    .subtitle{
      margin: 0 0 16px;
      opacity:.85;
      font-size: 15px;
    }

    .btnrow{
      position: relative;
      margin-top: 22px;
      min-height: 120px;
      display: block;
      overflow: hidden; /* waÅ¼ne: uciekajÄ…ce NIE nie wyjdzie poza arenÄ™ */
    }

    .btn{
      border:0;
      border-radius: 16px;
      padding: 14px 18px;
      font-size: 18px;
      font-weight: 750;
      letter-spacing:.01em;
      cursor:pointer;
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease, opacity .35s ease;
      user-select:none;
      position:relative;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    .btn:active{transform: translateY(1px) scale(.99)}

    .btn-yes{
      background: linear-gradient(135deg, var(--accent), #ff7aa5);
      color:white;
      box-shadow: 0 14px 34px rgba(255,61,110,.28);
    }
    .btn-yes:hover{filter:brightness(1.03); transform: translateY(-1px) scale(1.01)}

    .btn-no{
      background: rgba(30,30,35,.08);
      color:#222;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      position:absolute;
      padding: 14px 18px;
      opacity: 1;
    }
    .btn-no:hover{transform: translateY(-1px)}

    /* ABSOLUTNIE KLUCZOWE: warstwy */
    #yes{
      position: absolute;
      left: 0;
      bottom: 0;
      z-index: 2;
      transform-origin: left center;
    }
    #no{
      z-index: 3; /* NIE zawsze nad TAK */
      transform-origin: center;
    }

    .panel{
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .stat{
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.7);
      border-radius: 18px;
      padding: 12px 14px;
    }
    .stat b{display:block; font-size: 18px;}
    .stat span{opacity:.75; font-size: 12px;}

    .tip{
      margin:0;
      font-size: 14px;
      opacity:.85;
      line-height:1.35;
    }

    .toast{
      position:absolute;
      left: 18px; bottom: 18px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(255,255,255,.8);
      border-radius: 16px;
      padding: 10px 12px;
      font-size: 13px;
      opacity: 0;
      transform: translateY(8px);
      transition: .25s ease;
      pointer-events:none;
    }
    .toast.show{opacity:1; transform: translateY(0px);}

    canvas{position:fixed; inset:0; pointer-events:none;}
    #confetti{z-index:6;}
    #hearts{z-index:2;}

    .final{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      z-index:10;
      background: radial-gradient(900px 600px at 50% 30%, rgba(255,255,255,.9), rgba(255,255,255,.45));
      backdrop-filter: blur(8px);
      padding: 22px;
      text-align:center;
    }
    .final .box{
      width:min(760px, 92vw);
      border-radius: 24px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      padding: 28px;
    }
    .final h2{
      margin:0 0 10px;
      font-size: clamp(28px, 4vw, 46px);
    }
    .final p{
      margin:0 0 18px;
      opacity:.85;
      font-size: 15px;
      line-height:1.4;
    }
    .final .small{
      font-size: 12px;
      opacity:.7;
      margin-top: 10px;
    }

    .mutebtn{
      border:0;
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.8);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight:650;
      font-size: 13px;
      opacity:.9;
    }
  </style>
</head>
<body>
  <div class="float" aria-hidden="true"></div>
  <canvas id="hearts"></canvas>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="card">
      <h1 class="title">Czy zostaniesz mojÄ… WalentynkÄ…? ğŸ’˜</h1>
      <p class="subtitle">Uwaga: przycisk â€NIEâ€ posiada wÅ‚asny instynkt samozachowawczy.</p>

      <p class="tip">
        Kliknij, jak czujesz. JeÅ›li klikniesz â€NIEâ€... cÃ³Å¼ â€” system moÅ¼e nie zgodziÄ‡ siÄ™ z TwojÄ… decyzjÄ… ğŸ˜Œ
      </p>

      <div class="btnrow" id="arena">
        <button class="btn btn-yes" id="yes">TAK â¤ï¸</button>
        <button class="btn btn-no" id="no">NIE ğŸ™ˆ</button>
      </div>

      <div class="toast" id="toast">ğŸ‘€</div>
    </div>

    <div class="card panel" id="side">
      <div class="stats">
        <div class="stat"><b id="noCount">0</b><span>prÃ³b klikniÄ™cia â€NIEâ€</span></div>
        <div class="stat"><b id="chance">100%</b><span>szansa na â€TAKâ€</span></div>
      </div>

      <p class="tip" id="status">
        Tip: â€NIEâ€ reaguje na zbliÅ¼enie kursora. To nie przypadek. To przeznaczenie.
      </p>

      <button class="mutebtn" id="mute">ğŸ”‡ DÅºwiÄ™k: OFF</button>

      <p class="tip" style="opacity:.7;margin-top:auto;"></p>
    </div>
  </div>

  <div class="final" id="final">
    <div class="box">
      <h2>Oficjalnie: jesteÅ› mojÄ… WalentynkÄ… ğŸ’</h2>
      <p>
        To jest ten moment, kiedy Internet mÃ³wi: <b>dobry wybÃ³r</b>.
        <br/>MiÅ‚oÅ›Ä‡ zaakceptowana. Serduszka aktywowane.
      </p>
      <button class="btn btn-yes" onclick="location.reload()">Jeszcze raz ğŸ˜„</button>
      <div class="small">Tip: moÅ¼esz zrobiÄ‡ screen i wysÅ‚aÄ‡ jako pamiÄ…tkÄ™.</div>
    </div>
  </div>

<script>
(() => {
  // ======= Audio (bez plikÃ³w, prosty â€œchimeâ€) =======
  let audioEnabled = false;
  let audioCtx = null;

  function beep(freq=660, dur=0.08, type='sine', gain=0.06){
    if(!audioEnabled) return;
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = type;
    o.frequency.value = freq;
    g.gain.value = gain;
    o.connect(g); g.connect(audioCtx.destination);
    o.start();
    o.stop(audioCtx.currentTime + dur);
  }
  function chime(){
    beep(740,0.07,'sine',0.055);
    setTimeout(()=>beep(880,0.08,'sine',0.055), 80);
    setTimeout(()=>beep(990,0.10,'sine',0.055), 160);
  }

  const muteBtn = document.getElementById('mute');
  muteBtn.addEventListener('click', () => {
    audioEnabled = !audioEnabled;
    muteBtn.textContent = audioEnabled ? "ğŸ”Š DÅºwiÄ™k: ON" : "ğŸ”‡ DÅºwiÄ™k: OFF";
    beep(420,0.06,'triangle',0.04);
  });

  // ======= UI / mechanika przyciskÃ³w =======
  const yes = document.getElementById('yes');
  const no = document.getElementById('no');
  const arena = document.getElementById('arena');
  const toast = document.getElementById('toast');
  const noCountEl = document.getElementById('noCount');
  const chanceEl = document.getElementById('chance');
  const status = document.getElementById('status');
  const final = document.getElementById('final');

  let noCount = 0;
  let yesScale = 1.0;

  const YES_MAX  = 1.22;   // mniejsze = brak nachodzenia na NIE
  const YES_STEP = 0.055;

  const taunts = [
    "Serio chcesz kliknÄ…Ä‡ â€NIEâ€? ğŸ‘€",
    "Przycisk â€NIEâ€ zgÅ‚asza sprzeciw proceduralny.",
    "System miÅ‚oÅ›ci wykryÅ‚ wahanie.",
    "To juÅ¼ wyglÄ…da podejrzanie romantycznieâ€¦",
    "Uwaga: â€NIEâ€ traci prawa obywatelskie."
  ];

  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 900);
  }
  function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

  function moveNoRandom(e){
    no.style.right = "";
    no.style.bottom = "";

    const rect = arena.getBoundingClientRect();
    const btnW = no.offsetWidth;
    const btnH = no.offsetHeight;
    const pad = 10;

    const mx = e ? (e.clientX - rect.left) : rect.width / 2;
    const my = e ? (e.clientY - rect.top)  : rect.height / 2;

    const maxX = rect.width  - btnW - pad;
    const maxY = rect.height - btnH - pad;

    const minDist = 140;

    let x, y, tries = 0;
    do {
      x = pad + Math.random() * (maxX - pad);
      y = pad + Math.random() * (maxY - pad);
      tries++;
      if (tries > 30) break;
    } while (Math.hypot(x - mx, y - my) < minDist);

    no.style.left = x + "px";
    no.style.top  = y + "px";
  }

  function placeNoStart(){
    no.style.right = "";
    no.style.bottom = "";
    const r = arena.getBoundingClientRect();
    no.style.left = (r.width - no.offsetWidth - 8) + "px";
    no.style.top  = (r.height - no.offsetHeight - 8) + "px";
  }
  window.addEventListener('resize', placeNoStart);
  placeNoStart();

  // start bez â€skokuâ€
  yes.style.transform = "scale(1)";
  no.style.transform  = "scale(1)";
  no.style.opacity    = "1";

  // ======= Hover â€œNIEâ€ =======
  let noCooldown = false;

  no.addEventListener('pointerenter', (e) => {
    if (noCooldown) return;
    noCooldown = true;
    setTimeout(() => noCooldown = false, 420);

    noCount++;
    noCountEl.textContent
